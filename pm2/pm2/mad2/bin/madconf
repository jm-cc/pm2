#!/bin/sh

# Just in case MAD2_ROOT is not defined
MAD2_ROOT=${MAD2_ROOT-${PM2_ROOT}/mad2}
export MAD2_ROOT

# Modification éventuelle de la configuration courante
if test $# -gt 0
then
	rm -f ${MAD2_ROOT}/.mad2_conf
	cp /dev/null ${MAD2_ROOT}/.mad2_conf
	echo $# >> ${MAD2_ROOT}/.mad2_conf
	for m in $*
	do
		echo $m >> ${MAD2_ROOT}/.mad2_conf
	done
fi

# Affichage de la configuration courante
if test -f ${MAD2_ROOT}/.mad2_conf
then
    set `cat ${MAD2_ROOT}/.mad2_conf`
    nb=`expr $# - 1`
    echo "The current MADELEINE configuration contains $nb host(s) :"
    i=0
    shift
    for m in $*
    do
	echo "$i : $m"
	i=`expr $i + 1`
    done
else
    echo "MADELEINE is not yet configured."
    echo "Please run \`madconf' with at least one host name."
    echo "Usage: madconf { host_name }"
fi
