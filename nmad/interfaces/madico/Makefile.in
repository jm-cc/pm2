srcdir := @srcdir@
VPATH  := $(srcdir)

include @abs_top_builddir@/common_vars.mk

TARGET_MOD =
TARGET_BIN =
TARGET_LIB =

TARGETS = subdirs $(TARGET_BIN) $(TARGET_LIB) $(TARGET_MOD)

INSTALL_BIN = $(TARGET_BIN)
INSTALL_LIB = $(TARGET_LIB)
INSTALL_MOD = $(TARGET_MOD)
INSTALL_INCLUDE =
INSTALL_INIT =

CPPFLAGS += @NMAD_CORE_CPPFLAGS@ 
CFLAGS   += @NMAD_CORE_CFLAGS@
LDFLAGS  += @NMAD_CORE_LDFLAGS@

ifeq (@with_padicotm@,yes)
  TARGET_MOD += NewMad_Launcher_madico PSP-NMad Control-minidriver PSP-minidriver
  CFLAGS   += @PadicoTM_CFLAGS@
  LIBS     += @PadicoTM_LIBS@
endif

include @abs_top_builddir@/common_rules.mk

NewMad_Launcher_madico: MODLIBS += --requires AddrDB --requires PadicoControl --requires NetSelector -L@nmad_builddir@ @NMAD_LIBS@
NewMad_Launcher_madico: nm_madico_launcher.pic.o

PSP-NMad: MODLIBS += --requires Topology --requires PSP --requires AddrDB --requires PadicoControl -L@nmad_builddir@ @NMAD_LIBS@
PSP-NMad: psp_nmad.pic.o

Control-minidriver: MODLIBS += --requires AddrDB
Control-minidriver: control-minidriver.pic.o

PSP-minidriver: MODLIBS += --requires Topology --requires PSP --requires AddrDB --requires PadicoControl
PSP-minidriver: psp-minidriver.pic.o
