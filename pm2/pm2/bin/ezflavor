#!/bin/sh
###########

error()
{
  echo $*
  exit 1
}

# Main part
[ -n "${PM2_ROOT}"    ] || error 'PM2_ROOT variable is not set'

PM2_CONFIG="${PM2_ROOT}/bin/pm2-config"
[ -x "${PM2_CONFIG}" ] || error "cannot execute ${PM2_CONFIG}"

EZFLAVOR_DIR=`${PM2_CONFIG} --flavor=ezflavor --bindir ezflavor`
[ -d "${EZFLAVOR_DIR}"  ] || error "Ezflavor directory not found"

EZFLAVOR="${EZFLAVOR_DIR}/ezflavor"
[ -x "${EZFLAVOR}"      ] || error "cannot execute ${EZFLAVOR}"

exec ${EZFLAVOR} ${@:+"$@"}

# End
