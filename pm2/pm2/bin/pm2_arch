#!/bin/sh

# PM2: Parallel Multithreaded Machine
# Copyright (C) 2001 "the PM2 team" (see AUTHORS file)
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or (at
# your option) any later version.
# 
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.


if [ -f /bin/uname -o -f /usr/bin/uname ]; then
	if [ -f /bin/uname ]; then
		_os="`/bin/uname -s`"
		_ht="`/bin/uname -m`"
	else
		_os="`/usr/bin/uname -s`"
		_ht="`/usr/bin/uname -m`"
	fi

	case "$_os,$_ht" in
	SunOS,sun*)        PM2_ARCH=SPARC_ARCH ; PM2_ASM=sparc ;;
	*,sparc*)          PM2_ARCH=SPARC_ARCH ; PM2_ASM=sparc ;;
	*,i86pc)           PM2_ARCH=X86_ARCH ; PM2_ASM=i386 ;;
	*,i[3456]86*)      PM2_ARCH=X86_ARCH ; PM2_ASM=i386 ;;
	BSD/OS,i[3456]86)  PM2_ARCH=X86_ARCH ; PM2_ASM=i386 ;;
	FreeBSD,i386)      PM2_ARCH=X86_ARCH ; PM2_ASM=i386 ;;
	*,ia64)            PM2_ARCH=IA64_ARCH ; PM2_ASM=ia64 ;;
	AIX*,*)            PM2_ARCH=RS6K_ARCH ; PM2_ASM=rs8k ;;
	*,alpha)           PM2_ARCH=ALPHA_ARCH ; PM2_ASM=alpha ;;
	*,mips)            PM2_ARCH=MIPS_ARCH ; PM2_ASM=mips ;;
	*,IP*)             PM2_ARCH=MIPS_ARCH ; PM2_ASM=mips ;;
	*,ppc)  	   PM2_ARCH=PPC_ARCH ; PM2_ASM=ppc ;;
        *,Power*)          PM2_ARCH=PPC_ARCH ; PM2_ASM=ppc ;;
        *)                 echo "unknown arch $_os,$_ht, please set in bin/pm2_arch";
	                   M2_ARCH=UNKNOWN_ARCH ; PM2_ASM=unknown ;;
	esac
fi

if [ "$1" != --source-mode ] ; then
    echo $PM2_ARCH

    exit 0
fi
