# Makefile for F77 Mad-MPI examples

srcdir := @srcdir@
VPATH  := $(srcdir)

include @puk_root@/etc/common_vars.mk

TARGET_BIN = $(patsubst $(srcdir)/%.f, %, $(wildcard $(srcdir)/*.f))
TARGET_LIB =
TARGET_MOD =
SUBDIRS =

INSTALL_BIN     = $(TARGET_BIN)
INSTALL_LIB     = $(TARGET_LIB)
INSTALL_INCLUDE = 

INSTALL_PREFIX := @nmad_root@

TARGETS = subdirs $(TARGET_BIN) $(TARGET_LIB) $(TARGET_MOD)


CFLAGS  := $(shell pkg-config --cflags nmad)
LDFLAGS := @NMAD_LDFLAGS@ $(LDFLAGS)
LIBS    := $(shell pkg-config --libs nmad)

include @puk_root@/etc/common_rules.mk

$(TARGET_BIN): %: %.pic.o

F77 = @F77@
LD = $(F77)
F77FLAGS = @FFLAGS@ @NMAD_CFLAGS@ -I@nmad_root@/include

%.pic.o: %.f
	@$(SHOWMK) "  [F77]    $@"
	$(Q)$(F77) $(F77FLAGS) -c -o $@ $<
